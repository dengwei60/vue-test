<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        [v-cloak]{
            display: none;
        }
        .nav{
            display: flex;    
        }
        .nav-item{
            width: 100px;
            height: 50px;
            border: 1px solid #ddd;
            line-height: 50px;
            text-align: center;
        }
        .active{
            background-color: #ddd;
        }
    </style>

</head>
<body>
    <!-- é€šè¿‡å¼•å…¥åŠ¨æ€ç»„ä»¶æ¥è¿›è¡Œå†…å®¹è·³è½¬çš„ç»‘å®š -->
    <div id="app" v-cloak>
        <!-- å¤´éƒ¨é€šè¿‡å¾ªç¯æ‹¿åˆ°å†…å®¹ -->
        <nav class="nav">
            <!-- åˆå› ä¸ºè¿™é‡Œçš„classéœ€è¦åŠ¨æ€çš„æ·»åŠ activeåæ‰€ä»¥éœ€è¦ç”¨,å¯¹è±¡æˆ–è€…æ•°ç»„çš„æ–¹å¼è¿›è¡Œæ·»åŠ  -->
            <section v-for="item,index in navs" :key="index" @click="handelChange(index)"
            :class="{'nav-item':true,active:currentTab === item.id}"
            >
            {{item.title}}
        </section>
        <!-- :class="['nav-item',{active:currentTab === item.id}]" -->
        </nav>
        <!--è¿™é‡Œé€šè¿‡è®¡ç®—å±æ€§æ¥æ‹¿åˆ°è¿™ä¸ªå†…å®¹ -->
        <section class="content">
            <!-- ä¸ºäº†åˆ‡æ¢çš„æ—¶å€™ä¸ç”¨ç¼“å­˜,æˆ‘ä»¬å°±ç›´æ¥å¼•ç”¨keepaliveæ¥ç¼“å­˜å½“æ—¶é‚£ä¸ªç»„ä»¶ -->
            <!-- ä½¿ç”¨åŠ¨æ€ç»„ä»¶æ¸²æŸ“ -->
            <!-- æ¯ä¸€æ¬¡éƒ½æ˜¯åœ¨æ¸²æŸ“ä¸åŒçš„ç»„ä»¶ -->
            <!-- <keep-alive>
                <component :is="componentId"></component>
            </keep-alive> -->
            <!-- inculdeåé¢æ˜¯è·Ÿå­—ç¬¦ä¸²æˆ–è€…æ­£åˆ™è¡¨è¾¾å¼ è¡¨ç¤ºåŒ…å«å“ªäº›ç»„ä»¶ä¼šè¢«ç¼“å­˜-->
            <!-- <keep-alive :include='["app-home","app-introduce"]'>
                <component :is="componentId"></component>
            </keep-alive> -->
            <!-- exclude,è¡¨ç¤ºä¸åŒ…å«å“ªäº›ç»„ä»¶ä¼šè¢«ç¼“å­˜,åé¢è·Ÿçš„å†…å®¹ä¾ç„¶å’Œincludeçš„è§„åˆ™ä¸€æ · -->
            <!-- <keep-alive :exclude='["app-product"]'>
                <component :is="componentId"></component>
            </keep-alive> -->
            <!-- max,è¡¨ç¤ºæœ€å¤šèƒ½ç¼“å­˜å¤šå°‘ç»„ä»¶ -->
            <!-- 1æ—¶ä¸ºå•¥ä¸ç”Ÿæ•ˆ -->
            <keep-alive :max="2">
                <component :is="componentId"></component>
            </keep-alive>
        </section>
    </div>
</body>
<script src="https://cn.vuejs.org/js/vue.js"></script>
<script>
    //ä¸»é¡µå¯¹åº”çš„ç»„ä»¶
    // Vue.component("app-home",{
    //     template:`
    //     <section>ä¸»é¡µ</section>
    //     `,
    //     beforeDestroy() {
    //         console.log("ä¸»é¡µé”€æ¯å‰")
    //     },
    //     destroyed() {
    //         console.log("ä¸»é¡µé”€æ¯å")
    //     },
    // })
    //å¼‚æ­¥ç»„ä»¶æ¼”ç¤º
    Vue.component("app-home",function(resolve,reject){
        setTimeout(() => {
            //æˆåŠŸçš„å›è°ƒ//åŒç†ä¹Ÿæœ‰å¤±è´¥çš„å›è°ƒ
            resolve({
                template:`<section>ğŸ˜ŠğŸ’¯ğŸ‘</section>`
            })
            // reject({
            //     template:`<section>options</section>`
            // })
            
        },3000);
       
    })
    //å…¬å¸ä»‹ç»å¯¹åº”çš„ç»„ä»¶
    Vue.component("app-introduce",{
        template:`
        <section>å…¬å¸ä»‹ç»</section>
        `,
        beforeDestroy() {
            console.log("å…¬å¸ä»‹ç»é”€æ¯å‰")
        },
        destroyed() {
            console.log("å…¬å¸ä»‹ç»é”€æ¯å")
        },
    })
    //äº§å“ä»‹ç»å¯¹åº”çš„ç»„ä»¶
    Vue.component("app-product",{
        template:`
        <section>äº§å“ä»‹ç»</section>
        `,
        beforeDestroy() {
            console.log("äº§å“ä»‹ç»é”€æ¯å‰")
        },
        destroyed() {
            console.log("äº§å“ä»‹ç»é”€æ¯å")
        },
    })

  
    let vm = new Vue({
         el:"#app",
        data:{
            //ç»™å®šä¸€ä¸ªä¸­é—´å˜é‡çš„idä»è€Œå®šä½åˆ°åˆ‡æ¢æ—¶å€™çš„å…ƒç´ å¥½åšæ•ˆæœæ¸²æŸ“
            currentTab:"home",
            navs:[{
                id:"home",
                title:"ä¸»é¡µ",
                content:"ä¸»é¡µ"
            },{
                id:"introduce",
                title:"å…¬å¸ä»‹ç»",
                content:"å…¬å¸ä»‹ç»"
            },{
                id:"product",
                title:"äº§å“ä»‹ç»",
                content:"äº§å“ä»‹ç»"
            }]
        },
        methods:{
            // changeParentTitle:function(value){
            //     this.title = value
            // }
            handelChange:function(index){
                this.currentTab = this.navs[index].id
            }
        },
        computed: {
            //è®¡ç®—å†…å®¹çš„æ–¹æ³•    
            componentId:function(){
                //å½“æ—¶çš„ç»„ä»¶çš„åå­—
                let componentId = "app-"+this.currentTab
                return componentId
            }
        },
    })
    
</script>
</html>